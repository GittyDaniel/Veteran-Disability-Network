---
/* No props needed */
---

<section class="testimonials" aria-labelledby="testimonials-title">
  <div class="testimonials-inner">
    <header class="testimonials-header">
      <h2 id="testimonials-title" class="testimonials-title">Hear From Other Veterans</h2>
      <span class="testimonials-accent" aria-hidden="true"></span>
    </header>

    <!-- Icon sprite: star symbol -->
    <svg class="defs" aria-hidden="true" focusable="false" width="0" height="0">
      <symbol id="icon-star" viewBox="0 0 24 24">
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M6.17024 14.8942L4.79402 22.9182L12 19.1298L19.206 22.9182L17.8298 14.8942L23.6595 9.21159L15.603 8.04091L12 0.740448L8.39701 8.04091L0.340477 9.21159L6.17024 14.8942ZM15.6808 14.196L16.5497 19.2622L12 16.8702L7.45028 19.2622L8.3192 14.196L4.6384 10.6081L9.72514 9.86892L12 5.25955L14.2749 9.86892L19.3616 10.6081L15.6808 14.196Z"/>
      </symbol>
    </svg>

    <div class="carousel" aria-roledescription="carousel" aria-label="Testimonials carousel">
      <ul class="track" role="list" tabindex="0" aria-label="Testimonials list">
        <!-- Slide 1 -->
        <li class="slide">
          <article class="tcard" aria-label="Testimonial from James R. rated 5 out of 5">
            <div class="tcard-quote">
              <p>
                I was overwhelmed by the VA process. My case manager explained everything and helped me file correctly.
                I finally received the rating I deserved.
              </p>
            </div>
            <footer class="tcard-foot">
              <h3 class="tcard-name">James R.</h3>
              <div class="rating" aria-label="5 out of 5">
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <span class="rating-value" aria-hidden="true">5.0</span>
              </div>
            </footer>
          </article>
        </li>

        <!-- Slide 2 -->
        <li class="slide">
          <article class="tcard" aria-label="Testimonial from Alyssa M. rated 5 out of 5">
            <div class="tcard-quote">
              <p>
                They connected me with a doctor who truly understood my conditions. The documentation we sent made the difference.
              </p>
            </div>
            <footer class="tcard-foot">
              <h3 class="tcard-name">Alyssa M.</h3>
              <div class="rating" aria-label="5 out of 5">
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <span class="rating-value" aria-hidden="true">5.0</span>
              </div>
            </footer>
          </article>
        </li>

        <!-- Slide 3 -->
        <li class="slide">
          <article class="tcard" aria-label="Testimonial from Marcus D. rated 4.5 out of 5">
            <div class="tcard-quote">
              <p>
                Clear steps, fast responses, and real support. I felt heard at every stage of my claim.
              </p>
            </div>
            <footer class="tcard-foot">
              <h3 class="tcard-name">Marcus D.</h3>
              <div class="rating" aria-label="4.5 out of 5">
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star dim"><use href="#icon-star"></use></svg>
                <span class="rating-value" aria-hidden="true">4.5</span>
              </div>
            </footer>
          </article>
        </li>

        <!-- Slide 4 -->
        <li class="slide">
          <article class="tcard" aria-label="Testimonial from Sofia P. rated 5 out of 5">
            <div class="tcard-quote">
              <p>
                The guidance was practical and honest. I knew what to expect and what evidence mattered most.
              </p>
            </div>
            <footer class="tcard-foot">
              <h3 class="tcard-name">Sofia P.</h3>
              <div class="rating" aria-label="5 out of 5">
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <span class="rating-value" aria-hidden="true">5.0</span>
              </div>
            </footer>
          </article>
        </li>

        <!-- Slide 5 -->
        <li class="slide">
          <article class="tcard" aria-label="Testimonial from Daniel K. rated 4.8 out of 5">
            <div class="tcard-quote">
              <p>
                Professional from day one. The team kept me informed and the results speak for themselves.
              </p>
            </div>
            <footer class="tcard-foot">
              <h3 class="tcard-name">Daniel K.</h3>
              <div class="rating" aria-label="4.8 out of 5">
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star dim"><use href="#icon-star"></use></svg>
                <span class="rating-value" aria-hidden="true">4.8</span>
              </div>
            </footer>
          </article>
        </li>

        <!-- Slide 6 -->
        <li class="slide">
          <article class="tcard" aria-label="Testimonial from Heather W. rated 5 out of 5">
            <div class="tcard-quote">
              <p>
                I wish I had found them earlier. The process finally made sense and moved forward.
              </p>
            </div>
            <footer class="tcard-foot">
              <h3 class="tcard-name">Heather W.</h3>
              <div class="rating" aria-label="5 out of 5">
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <svg class="star"><use href="#icon-star"></use></svg>
                <span class="rating-value" aria-hidden="true">5.0</span>
              </div>
            </footer>
          </article>
        </li>
      </ul>

      <div class="dots" role="tablist" aria-label="Testimonials pages"></div>
    </div>
  </div>

  <style>
    .testimonials {
      background: var(--color-bg);
      color: var(--color-text);
      padding: clamp(2.5rem, 6vw, 4rem) 1rem;
      border-top: 1px solid var(--color-border);
    }
    .testimonials-inner { max-width: 72rem; margin: 0 auto; }

    .testimonials-header { text-align: center; margin-bottom: clamp(1.5rem, 4vw, 2rem); }
    .testimonials-title {
      font: 800 clamp(1.5rem, 2.2vw + 1rem, 2.25rem) "Merriweather", Georgia, serif;
      line-height: 1.15; margin: 0; color: var(--color-primary);
      text-wrap: balance;
    }
    .testimonials-accent {
      display: inline-block; width: 96px; height: 4px; border-radius: 999px;
      margin-top: .6rem;
      background: linear-gradient(90deg, #b22234 0%, var(--color-primary) 100%);
    }

    /* === Carousel ===================================================== */
    .carousel {
      --gap: clamp(.9rem, 2.4vw, 1.25rem);
      --perPage: 1;            /* updated by media queries */
      --slideH: auto;          /* set by script to match tallest */
    }

    .track {
      display: flex;
      gap: var(--gap);
      overflow-x: auto;
      overflow-y: hidden;      /* enforce horizontal-only overflow */
      scroll-snap-type: x mandatory;
      scroll-padding-inline: 1rem;
      padding: 0 0 1rem 0;     /* room above dots */
      margin: 0;
      list-style: none;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior-x: contain;
      scrollbar-width: none;
      cursor: grab;
      mask-image: linear-gradient(to right, transparent, #000 24px, #000 calc(100% - 24px), transparent);
    }
    .track:active { cursor: grabbing; }
    .track::-webkit-scrollbar { display: none; }

    .slide {
      flex: 0 0 calc((100% - (var(--gap) * (var(--perPage) - 1))) / var(--perPage));
      min-width: 0;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      display: flex;           /* allow card to fill height */
      height: var(--slideH);
    }

    /* === Speech Cards ================================================ */
    .tcard {
      display: grid;
      grid-template-rows: 1fr auto;
      width: 100%;
      border-radius: 1rem;
      background: #fff;
      color: var(--color-text);
      box-shadow: 0 12px 28px rgba(0,0,0,.12);
      outline: 1px solid var(--color-border);
      outline-offset: -1px;
      overflow: hidden;
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .tcard:hover, .tcard:focus-within {
      transform: translateY(-2px);
      box-shadow: 0 16px 32px rgba(0,0,0,.18);
    }
    /* patriotic top rule */
    .tcard::before {
      content: "";
      display: block;
      height: 4px;
      background: linear-gradient(90deg, #b22234 0%, var(--color-primary) 100%);
    }

    .tcard-quote {
      position: relative;
      padding: 1.2rem 1.2rem .75rem 1.2rem;
    }
    .tcard-quote p {
      margin: 0;
      font-size: 1rem;
      line-height: 1.6;
      text-wrap: pretty;
    }
    /* Word‑art opening quote on paragraph */
    .tcard-quote p::before {
      content: "“";
      position: absolute;
      top: .3rem; left: .65rem;
      transform: translate(-100%, -15%);  /* sits outside text start */
      font-family: Georgia, "Times New Roman", serif;
      font-weight: 700;
      font-size: clamp(2.4rem, 4.2vw, 3.2rem);
      line-height: 1;
      opacity: .16;
      background: linear-gradient(135deg, #b22234 0%, var(--color-primary) 75%);
      -webkit-background-clip: text; background-clip: text;
      -webkit-text-fill-color: transparent;
      pointer-events: none; user-select: none;
    }

    .tcard-foot {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .75rem;
      padding: .75rem 1.2rem 1.1rem;
      border-top: 1px solid var(--color-border);
      background: #fff;
    }
    .tcard-name {
      margin: 0;
      font: 800 1.05rem "Merriweather", Georgia, serif;
      color: var(--color-primary);
      letter-spacing: .01em;
    }

    .rating { display: inline-flex; align-items: center; gap: .25rem; color: var(--color-primary); }
    .star { width: 18px; height: 18px; display:block; }
    .star path { fill: currentColor; }
    .star.dim { opacity: .35; }
    .rating-value { margin-left: .25rem; font-weight: 700; font-size: .875rem; color: var(--color-text); opacity: .8; }

    /* === Dots ======================================================== */
    .dots {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: .55rem;
      margin-top: .25rem;
      padding: .25rem 0 0;
    }
    .dot {
      width: 12px;
      height: 12px;                  /* explicit circle */
      border-radius: 50%;
      border: 2px solid color-mix(in srgb, var(--color-primary) 80%, #ffffff 20%);
      background: transparent;
      display: block;
      flex: 0 0 auto;                /* never stretch */
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }
    .dot[aria-selected="true"] { background: var(--color-primary); border-color: var(--color-primary); }
    .dot:focus-visible { outline: 3px solid color-mix(in srgb, var(--color-primary) 65%, #ffffff); outline-offset: 3px; }

    /* === Responsive: cards per view ================================== */
    @media (min-width: 700px)  { .carousel { --perPage: 2; } }
    @media (min-width: 1024px) { .carousel { --perPage: 3; } }

    /* Mobile ergonomics */
    @media (max-width: 640px) {
      .tcard { border-radius: .9rem; }
      .tcard-quote { padding: 1rem 1rem .6rem 1rem; }
      .tcard-foot { padding: .65rem 1rem 1rem; }
      .tcard-name { font-size: 1rem; }
    }

    @media (prefers-reduced-motion: reduce) {
      .tcard { transition: none; }
      .track { scroll-behavior: auto !important; }
    }
  </style>

  <!-- Behavior -->
  <script src="../scripts/testimonials.ts"></script>
</section>
